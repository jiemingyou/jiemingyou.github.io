<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jieming You">
<meta name="dcterms.date" content="2023-07-27">

<title>Jieming You - Prisoners and Hats</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SG7MFM798X"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SG7MFM798X', { 'anonymize_ip': true});
</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jieming You</span>
    </a>
  </div>
          <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/jiemingy/"><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jiemingyou"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="http://linkedin.com/in/jiemingy/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Prisoners and Hats</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Riddle</div>
    <div class="quarto-category">Math</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jieming You </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 27, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>I came across on a fun riddle with interesting analogues in mathematics.</p>
<p>Here’s a comprehensive overview of the riddle, its solution, and the underlying logic.</p>
<div class="card border-primary mb-3">
<div class="card-body">
<p><strong>Ten prisoners Ten hats</strong></p>
The prisoners are engaged in a game where winning secures their release and freedom. <br><br> There are ten prisoners and ten different colored hats. Each prisoner is given a random hat, but they are not aware of its color. The prisoners are aware of all the possible colors options. The distribution of the colors is completely random, which means some may have the same colored hat and some colors may not be given (i.e., the hats are sampled with replacement from a pool of ten different colours). They then arrange themselves in a line, ensuring that each prisoner can see all the hats except their own.<br><br> <strong>An example draw</strong> <br> 🔴 🔵 🟢 ⚪️ 🔵 🟢 🟢 🟣 🟠 ⚫️ <br> 🙆 🙆 🙆 🙆 🙆 🙆 🙆 🙆 🙆 🙆 <br><br> Their ultimate objective is to correctly guess the color of their own hat. When the officer counts to ten, all prisoners must simultaneously shout out their hat color guesses. If at least one prisoner guesses correctly, everyone is set free. <br><br> Before the game begins, the prisoners are allowed to strategize and come up with a plan, but once the hats are distributed, they cannot communicate with each other in any manner. <br><br> How can they ensure their freedom?
</div>
</div>
<p>Can you come up with a fool-proof strategy? Scroll down the see the gradual breakdown of the answer.</p>
<p><br><br></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="scrolldown.gif" class="img-fluid figure-img" width="125"></p>
</figure>
</div>
<p><br><br><br><br><br></p>
<section id="winning-probability" class="level2">
<h2 class="anchored" data-anchor-id="winning-probability">Winning probability</h2>
<p>Let’s first consider a scenario where every prisoner guesses a color randomly. Since there are ten colors, the probability of a single prisoner guessing right is</p>
<p><span class="math display">\[
\mathbb{P}(\text{one prisoner guesses right}) = 1/10
\]</span></p>
<p>The probability of at least one prisoner guessing right can be obtained by calculating the complementary event of no one guessing right <span class="math display">\[
\begin{align}
\mathbb{P}(\text{at least one right})
&amp;= 1 - \mathbb{P}(\text{all wrong}) \\
&amp;= 1 - (\frac{9}{10}) ^ {10} \\
&amp; \approx 65\%
\end{align}
\]</span></p>
<p>Not too shabby. But if your freedom depends on this figure, you’d certainly want to do better.</p>
</section>
<section id="joint-probability" class="level2">
<h2 class="anchored" data-anchor-id="joint-probability">Joint probability</h2>
<p>Let’s denote the event of <span class="math inline">\(i\)</span>:th prisoner guessing right as <span class="math inline">\(A_i\)</span>. It’s evident that every prisoner have an equal chance of <span class="math inline">\(10\%\)</span> guessing the right color.</p>
<p><span class="math display">\[
0 \leq A_i \leq 0.1 \quad :\forall i \in \{1, 2, \ldots, 10\}
\]</span></p>
<p>The probability of the prisoners winning the game every time can be expressed as a joint probability</p>
<p><span class="math display">\[
\mathbb{P}(A_1 ~\text{or}~ A_2 ~\text{or}~ \ldots ~\text{or}~ A_{10}) = 1
\]</span></p>
<p>Using the additive rule on probability, the joint probability can be further expanded as</p>
<p><span class="math display">\[
\sum_{i=1}^{10} \mathbb{P}(A_i) -
\underbrace{
  \left(
    \begin{aligned}
  &amp;\mathbb{P}(A_1 ~\cap~ A_2) \\
  +&amp; \mathbb{P}(A_1 ~\cap~ A_3) \\
  +&amp; \ldots \\
  +&amp; \mathbb{P}(A_1 ~\cap~ \ldots ~\cap~ A_{10})
  \end{aligned}
  \right)
}_\text{has to be zero} = 1
\]</span></p>
<p>Intuitively, since each prisoner has a probability of 1/10 for guessing correctly and there are ten guesses, it is necessary for all the guesses to be <em>mutually exclusive</em>.</p>
<p><br></p>
</section>
<section id="solution" class="level2">
<h2 class="anchored" data-anchor-id="solution"><strong>SOLUTION</strong></h2>
<p>The idea behind the winning strategy is to partition the decision space into ten distinct and non-overlapping alternatives. This approach ensures that one, and only one, prisoner will make the correct guess with certainty.</p>
<p>Here’s a solution that’s based on basic modular arithmetics. First, let’s give each colors a corresponding number:</p>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th><span class="math inline">\(c_1\)</span></th>
<th><span class="math inline">\(c_2\)</span></th>
<th><span class="math inline">\(c_3\)</span></th>
<th><span class="math inline">\(c_4\)</span></th>
<th><span class="math inline">\(c_5\)</span></th>
<th><span class="math inline">\(c_6\)</span></th>
<th><span class="math inline">\(c_7\)</span></th>
<th><span class="math inline">\(c_8\)</span></th>
<th><span class="math inline">\(c_9\)</span></th>
<th><span class="math inline">\(c_{10}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>🔴</td>
<td>🟢</td>
<td>🔵</td>
<td>🟠</td>
<td>🟣</td>
<td>⚪️</td>
<td>⚫️</td>
<td>🟡</td>
<td>🟤</td>
<td>⭕️</td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
</tbody>
</table>
<p>Now let’s assume that the prisoners have been given the following colors:</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th><strong>prisoner (<span class="math inline">\(i\)</span>)</strong></th>
<th><span class="math inline">\(1\)</span></th>
<th><span class="math inline">\(2\)</span></th>
<th><span class="math inline">\(3\)</span></th>
<th><span class="math inline">\(4\)</span></th>
<th><span class="math inline">\(5\)</span></th>
<th><span class="math inline">\(6\)</span></th>
<th><span class="math inline">\(7\)</span></th>
<th><span class="math inline">\(8\)</span></th>
<th><span class="math inline">\(9\)</span></th>
<th><span class="math inline">\(10\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>hat</strong></td>
<td>🔴</td>
<td>🟢</td>
<td>🔵</td>
<td>🟠</td>
<td>🟠</td>
<td>⚪️</td>
<td>⚫️</td>
<td>🟡</td>
<td>🟢</td>
<td>⚫️</td>
</tr>
<tr class="even">
<td><strong>value</strong></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>1</td>
<td>6</td>
</tr>
</tbody>
</table>
<p><br></p>
<section id="calculate-the-sum" class="level4">
<h4 class="anchored" data-anchor-id="calculate-the-sum">1. <strong>Calculate the sum</strong></h4>
<p>Each prisoner <span class="math inline">\(i=1, 2, \ldots, 10\)</span> calculates the sum of the other peoples’ hats.</p>
<p><span class="math display">\[
S_i = \sum_{j \neq i } c_j
\]</span></p>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th><strong>prisoner (<span class="math inline">\(i\)</span>)</strong></th>
<th><span class="math inline">\(1\)</span></th>
<th><span class="math inline">\(2\)</span></th>
<th><span class="math inline">\(3\)</span></th>
<th><span class="math inline">\(4\)</span></th>
<th><span class="math inline">\(5\)</span></th>
<th><span class="math inline">\(6\)</span></th>
<th><span class="math inline">\(7\)</span></th>
<th><span class="math inline">\(8\)</span></th>
<th><span class="math inline">\(9\)</span></th>
<th><span class="math inline">\(10\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="math inline">\(S_i\)</span></strong></td>
<td>34</td>
<td>33</td>
<td>32</td>
<td>31</td>
<td>31</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>33</td>
<td>28</td>
</tr>
</tbody>
</table>
<p><br></p>
</section>
<section id="each-of-them-calculates-the-remainder-r_i-modulo-10" class="level4">
<h4 class="anchored" data-anchor-id="each-of-them-calculates-the-remainder-r_i-modulo-10">2. <strong>Each of them calculates the remainder <span class="math inline">\(R_i\)</span> modulo 10:</strong></h4>
<p><span class="math display">\[
S_i \equiv R_i \pmod {10}
\]</span></p>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th><strong>prisoner (<span class="math inline">\(i\)</span>)</strong></th>
<th><span class="math inline">\(1\)</span></th>
<th><span class="math inline">\(2\)</span></th>
<th><span class="math inline">\(3\)</span></th>
<th><span class="math inline">\(4\)</span></th>
<th><span class="math inline">\(5\)</span></th>
<th><span class="math inline">\(6\)</span></th>
<th><span class="math inline">\(7\)</span></th>
<th><span class="math inline">\(8\)</span></th>
<th><span class="math inline">\(9\)</span></th>
<th><span class="math inline">\(10\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><span class="math inline">\(S_i\)</span></strong></td>
<td>34</td>
<td>33</td>
<td>32</td>
<td>31</td>
<td>31</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>33</td>
<td>28</td>
</tr>
<tr class="even">
<td><strong><span class="math inline">\(R_i\)</span></strong></td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>3</td>
<td>8</td>
</tr>
</tbody>
</table>
<p><br></p>
</section>
<section id="deriving-the-guess-c_i" class="level4">
<h4 class="anchored" data-anchor-id="deriving-the-guess-c_i">3. <strong>Deriving the guess <span class="math inline">\(c_i\)</span></strong></h4>
<p>Now that the prerequisites are set up, it’s time for the prisoners to execute the strategy and calculate their own guesses <span class="math inline">\(c_i\)</span>. The sum of all values and its remainder, denoted as <span class="math inline">\(S_{truth}\)</span> and <span class="math inline">\(R_{truth}\)</span>, are simply</p>
<p><span class="math display">\[
\begin{aligned}
&amp; S_{truth} = \sum_i c_i = S_i ~~ + \underbrace{c_i}_{
  \substack{\text{i:th}\\
  \text{prisoner's}\\
  \text{guess}}
  } \\ \\
&amp; S_{truth} = S_i + c_i  \equiv R_{truth} \pmod {10}
\end{aligned}
\]</span></p>
<p>The prisoners are unaware of the real sum <span class="math inline">\(S_{truth}\)</span> and the real remainder <span class="math inline">\(R_{truth}\)</span> as their own hats’ colors <span class="math inline">\(c_i\)</span> are unknown to them. However, they are certain that the real remainder <span class="math inline">\(R_{truth}\)</span> lies between zero and nine, regardless of the sum.</p>
<p>If each prisoner guesses a distinct remainder <span class="math inline">\(R_{truth}\)</span>, it is ensured that one, and only one, prisoner will always guess the correct remainder.</p>
<p>Let’s make the 1st prisoner guess <span class="math inline">\(R_{guess,1} = 0\)</span>, the 2nd guesses <span class="math inline">\(R_{guess, 2} = 1\)</span> and so on. The i:th prisoner’s guess can be calculated by solving <span class="math inline">\(c_i\)</span> from previous equation.</p>
<p><span class="math display">\[
\begin{aligned}
\underbrace{c_i}_{\text{i:th prisoner's guess}}
= 10 - R_i +
R_{guess,i}
\pmod {10}
\end{aligned}
\]</span></p>
<p><br></p>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 26%">
<col style="width: 46%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Prisoner</th>
<th style="text-align: center;"><span class="math inline">\(R_i\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_{guess}\)</span></th>
<th style="text-align: center;"><span class="math inline">\(c_i\)</span></th>
<th style="text-align: center;">Color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">⚫️</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">🟤</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">🔴</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">🔵</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">🟠</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">⚫️</td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">🟤</td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">🔴</td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">⚪️</td>
</tr>
<tr class="even">
<td style="text-align: center;">10</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">🟢</td>
</tr>
</tbody>
</table>
<p>Let’s check the reusults</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th><strong>prisoner (<span class="math inline">\(i\)</span>)</strong></th>
<th><span class="math inline">\(1\)</span></th>
<th><span class="math inline">\(2\)</span></th>
<th><span class="math inline">\(3\)</span></th>
<th><span class="math inline">\(4\)</span></th>
<th><span class="math inline">\(5\)</span></th>
<th><span class="math inline">\(6\)</span></th>
<th><span class="math inline">\(7\)</span></th>
<th><span class="math inline">\(8\)</span></th>
<th><span class="math inline">\(9\)</span></th>
<th><span class="math inline">\(10\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>dealt hat</strong></td>
<td>🔴</td>
<td>🟢</td>
<td>🔵</td>
<td>🟠</td>
<td>🟠</td>
<td>⚪️</td>
<td>⚫️</td>
<td>🟡</td>
<td>🟢</td>
<td>⚫️</td>
</tr>
<tr class="even">
<td><strong>guessed hat</strong></td>
<td>⚫️</td>
<td>🟤</td>
<td>🔴</td>
<td>🔵</td>
<td>🟠</td>
<td>⚫️</td>
<td>🟤</td>
<td>🔴</td>
<td>⚪️</td>
<td>🟢</td>
</tr>
</tbody>
</table>
<p>The prisoner number 5 guessed his own hat and everyone gets free. Hooray!</p>
<p><br><br><br></p>
</section>
</section>
<section id="further-notes" class="level2">
<h2 class="anchored" data-anchor-id="further-notes">Further notes</h2>
<p>The problem can be also rewritten as follows:</p>
<p>Consider an ordered list of <span class="math inline">\(n\)</span> integers, denoted as <span class="math inline">\({x_1, x_2, \ldots, x_n}\)</span>, randomly sampled with replacement from the discrete interval <span class="math inline">\([0, n]\)</span>. The task is to construct an ordered array of <span class="math inline">\(n\)</span> integers, represented as <span class="math inline">\({y_1, y_2, \ldots, y_n}\)</span>, where each <span class="math inline">\(y_i\)</span> is an integer between <span class="math inline">\(0\)</span> and <span class="math inline">\(9\)</span> (inclusive). The objective is to find such an array in a way that guarantees the existence of at least one integer in the constructed array that matches both its value and its index with the corresponding integer in the original list.</p>
<p>Simulation of solution written in Python.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> random <span class="im">import</span> choices</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># n random integers from [0, n-1]</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> choices(<span class="bu">range</span>(n), k<span class="op">=</span>n)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> []</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Generating the guesses</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># All but the i:th digit</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    others <span class="op">=</span> X[:i] <span class="op">+</span> X[i<span class="op">+</span><span class="dv">1</span>:]</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remainder from modulo n</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    remainder <span class="op">=</span> <span class="bu">sum</span>(others) <span class="op">%</span> n</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># (guess + remainder) % n == i</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    guess <span class="op">=</span> (<span class="dv">10</span> <span class="op">-</span> remainder <span class="op">+</span> i) <span class="op">%</span> n</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    Y.append(guess)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(X)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[9, 7, 3, 1, 2, 4, 5, 6, 7, 1]
[4, 3, 0, 9, 1, 4, 6, 8, 0, 5]</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Made with Quarto and Pandoc<br>© 2023 Jieming You
  </li>  
</ul>
      </div>
  </div>
</footer>



</body></html>